(this["webpackJsonplifesum-clone"]=this["webpackJsonplifesum-clone"]||[]).push([[0],{37:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},57:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),o=n(38),r=n.n(o),s=(n(48),n(5)),i=(n(49),n(7)),l=n(8),u=n(27),d=(n(50),n(82)),j=(n(51),n(1)),b=function(e){var t={fontSize:"".concat(Math.round(Number(e.circleSize)/5),"px")},n={fontSize:"".concat(Math.round(Number(e.circleSize)/12),"px")};return Object(j.jsxs)("div",{className:"progresscircle",children:[Object(j.jsx)(d.a,{variant:"determinate",value:e.progress,size:"".concat(e.circleSize,"px"),color:"inherit",thickness:1.2}),Object(j.jsxs)("div",{className:"progresscircle-text",children:[Object(j.jsx)("h2",{style:t,children:e.calories}),Object(j.jsx)("h3",{style:n,children:e.message})]})]})},m=function(e){var t=Object(a.useState)(e.config.goalCal),n=Object(s.a)(t,2),c=n[0],o=n[1],r=Object(a.useState)([e.config.goalCarb,e.config.goalProtein,e.config.goalFat]),l=Object(s.a)(r,2),d=l[0],m=l[1],f=Object(a.useState)(0),h=Object(s.a)(f,2),p=h[0],O=h[1],g=Object(a.useState)([0,0,0]),x=Object(s.a)(g,2),v=x[0],N=x[1],y=Object(a.useState)(0),C=Object(s.a)(y,2),S=C[0],D=C[1],w=Object(a.useState)(0),k=Object(s.a)(w,2),P=k[0],F=k[1],E=Object(a.useState)(0),U=Object(s.a)(E,2),A=U[0],M=U[1],z=Object(a.useState)([0,0,0]),I=Object(s.a)(z,2),L=I[0],B=I[1],q=Object(a.useState)(0),G=Object(s.a)(q,2),R=G[0],T=G[1],V=Object(a.useState)([0,0,0]),K=Object(s.a)(V,2),H=K[0],J=K[1],W=Object(a.useState)({color:"white"}),_=Object(s.a)(W,2),Y=_[0],Z=_[1],Q=Object(a.useState)([{color:"white"},{color:"white"},{color:"white"}]),X=Object(s.a)(Q,2),$=X[0],ee=X[1],te=Object(a.useState)("Calories Left"),ne=Object(s.a)(te,2),ae=ne[0],ce=ne[1],oe=Object(a.useState)(["Grams Left","Grams Left","Grams Left"]),re=Object(s.a)(oe,2),se=re[0],ie=re[1];return Object(a.useEffect)((function(){O(e.data.sumCal),D(e.data.sumBurnt),N([e.data.sumCarb,e.data.sumProtein,e.data.sumFat])}),[e.data]),Object(a.useEffect)((function(){o(e.config.goalCal),m([e.config.goalCarb,e.config.goalProtein,e.config.goalFat])}),[e.config]),Object(a.useEffect)((function(){var e=p-S;F(e=e<0?0:e)}),[p,S]),Object(a.useEffect)((function(){var e=c-P,t=Math.round(P/c*100);t>100?(t%=100,e=P-c,ce("Calories Over"),Z({color:"rgb(245, 235, 146)"})):Z({color:"white"}),t>200&&(t=100),M(e),T(t)}),[P,c]),Object(a.useEffect)((function(){for(var e=Object(u.a)(L),t=Object(u.a)(H),n=Object(u.a)($),a=Object(u.a)(se),c=0;c<3;c++){var o=d[c]-v[c],r=Math.round(v[c]/d[c]*100);r>100?(r%=100,o=v[c]-d[c],n[c]={color:"rgb(245, 235, 146)"},a[c]="Grams Over"):n[c]={color:"white"},r>200&&(r=100),e[c]=o,t[c]=r}ee(n),B(e),J(t),ie(a),console.log("Color of Macro: ",n),console.log("Left of Macro: ",e),console.log("Progress of Macro: ",t)}),[v,d]),Object(j.jsxs)("div",{className:"databar",children:[Object(j.jsxs)("div",{className:"databar-top",children:[Object(j.jsxs)("div",{className:"databar-data",children:[Object(j.jsx)("h2",{children:p}),Object(j.jsx)("h3",{children:"Calories Eaten"})]}),Object(j.jsx)("div",{className:"databar-calories",style:Y,children:Object(j.jsx)(b,{progress:R,circleSize:"480",calories:A,message:ae})}),Object(j.jsxs)("div",{className:"databar-data",children:[Object(j.jsx)("h2",{children:c}),Object(j.jsx)("h3",{children:"Calorie Goal"})]})]}),Object(j.jsx)("div",{className:"databar-bottom",children:["Carbs","Protein","Fat"].map((function(e,t){return Object(j.jsxs)("div",{className:"databar-data",style:$[t],children:[Object(j.jsx)("h2",{style:{color:"white"},children:e}),Object(j.jsx)(b,{progress:H[t],circleSize:"240",calories:L[t],message:se[t]})]},e)}))}),Object(j.jsx)(i.b,{to:"/datasheet",children:Object(j.jsx)("button",{className:"databar-button",children:"\ud83d\udcca Nutrient Data"})})]})},f=function(e){return Object(j.jsxs)("div",{className:"datechanger",children:[Object(j.jsx)("button",{onClick:function(){return e.dispatchDate({type:"decrement"})},children:"\u2b05"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:e.date}),Object(j.jsx)("input",{type:"date",id:"datechanger-date",onChange:function(t){var n=new Date(t.currentTarget.value);n.setDate(n.getDate()+1),e.dispatchDate({type:"update",payload:n})}})]}),Object(j.jsx)("button",{onClick:function(){return e.dispatchDate({type:"increment"})},children:"\u27a1"})]})},h=(n(57),function(e){var t=Object(a.useState)(e.meal),n=Object(s.a)(t,2),c=n[0],o=n[1],r=Object(a.useState)(e.totalCal),l=Object(s.a)(r,2),u=l[0],d=l[1],b={breakfast:{title:"Breakfast",emoji:"\ud83c\udf73"},lunch:{title:"Lunch",emoji:"\ud83e\udd57"},dinner:{title:"Dinner",emoji:"\ud83c\udf72"},snacks:{title:"Snacks",emoji:"\ud83c\udf50"}};return Object(a.useEffect)((function(){o(e.meal),d(e.totalCal)}),[e]),Object(j.jsxs)("div",{className:"mealbar",children:[Object(j.jsxs)("div",{className:"mealbar-top",children:[Object(j.jsx)("h2",{className:"mealbar-emoji",children:b[c].emoji}),Object(j.jsx)(i.b,{to:"/meal/".concat(c),children:Object(j.jsxs)("div",{className:"mealbar-text",children:[Object(j.jsx)("h2",{children:b[c].title}),Object(j.jsx)("h3",{children:"Here I'll write down a list of foods"})]})}),Object(j.jsx)(i.b,{to:"/meal/".concat(c,"/search"),children:Object(j.jsx)("button",{children:"\u2795"})})]}),Object(j.jsx)("div",{className:"mealbar-bottom",children:Object(j.jsxs)("h2",{children:[u," Calories"]})})]})}),p=n(26);n(58),n(70);p.a.initializeApp({apiKey:"AIzaSyBuUbx8Hxva5oyPCSAAdGp9nBkzbaK1t6M",authDomain:"lifesum-clone.firebaseapp.com",projectId:"lifesum-clone",storageBucket:"lifesum-clone.appspot.com",messagingSenderId:"87225916127",appId:"1:87225916127:web:2a81ab0a4faf08b270e76a"});p.a.firestore(),p.a.auth();var O,g,x,v,N,y=p.a,C=(n(60),function(e){var t=Object(a.useState)(!0),n=Object(s.a)(t,2),c=n[0],o=n[1];return!0===c?Object(j.jsxs)("div",{className:"page-signin",children:[Object(j.jsx)("h2",{children:"Lifesum Clone"}),Object(j.jsx)("h3",{children:"Please Don't Use Real Private Information"}),Object(j.jsxs)("div",{className:"signin",children:[Object(j.jsx)("h1",{children:"Sign Up"}),Object(j.jsx)("input",{type:"text",placeholder:"username",id:"signUp-username",maxLength:"12",autoComplete:"off"}),Object(j.jsx)("input",{type:"email",placeholder:"fake email",id:"signUp-email",maxLength:"20",autoComplete:"off"}),Object(j.jsx)("input",{type:"password",placeholder:"password",id:"signUp-password",maxLength:"15",autoComplete:"off"}),Object(j.jsx)("button",{onClick:function(){var t=document.querySelector("#signUp-username"),n=document.querySelector("#signUp-email"),a=document.querySelector("#signUp-password"),c=y.auth().createUserWithEmailAndPassword(n.value,a.value);c.then((function(n){return e.changeSign(!!y.auth().currentUser),n.user.updateProfile({displayName:t.value})})),c.catch((function(e){return alert(e)}))},children:"Submit"}),Object(j.jsx)("h4",{children:"Already a member?"}),Object(j.jsx)("button",{onClick:function(){o(!1)},id:"signin-btnOther",children:"Log In"})]})]}):Object(j.jsxs)("div",{className:"page-signin",children:[Object(j.jsx)("h2",{children:"Lifesum Clone"}),Object(j.jsxs)("div",{className:"signin",children:[Object(j.jsx)("h1",{children:"Log In"}),Object(j.jsx)("input",{type:"email",placeholder:"email",id:"logIn-email",autoComplete:"off"}),Object(j.jsx)("input",{type:"password",placeholder:"password",id:"logIn-password",autoComplete:"off"}),Object(j.jsx)("button",{onClick:function(){var t=document.querySelector("#logIn-email"),n=document.querySelector("#logIn-password"),a=y.auth().signInWithEmailAndPassword(t.value,n.value);a.then((function(t){e.changeSign(!!y.auth().currentUser)})),a.catch((function(e){return alert(e)}))},children:"Log In"}),Object(j.jsx)("h4",{children:"Not a member?"}),Object(j.jsx)("button",{onClick:function(){o(!0)},id:"signin-btnOther",children:"Sign Up"})]})]})}),S=(n(61),n(28)),D=function(e){var t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();return e=t+"-"+n+"-"+a},w=function(e){if(""!==e&&"string"===typeof e)return e.charAt(0).toUpperCase()+e.slice(1)},k=function(e,t){var n=e.nutrition.nutrients.filter((function(e){return e.name===t}));return n.length>0?n[0]:{name:"Not Found",amount:0,unit:"cal",percentOfDailyNeeds:0}},P=function(e,t,n,a,c){var o=Object(S.a)({},e);return o.meals[t][n]=Math.round("add"===c?o.meals[t][n]+a:o.meals[t][n]-a),o[n]=Math.round("add"===c?o[n]+a:o[n]-a),o},F=function(e,t,n,a,c,o){var r=Object(S.a)({},e);return r.meals[t].nutrients=r.meals[t].nutrients.map((function(e){return e.name===n&&(e.amount=Math.round("add"===o?e.amount+a:e.amount-a),void 0!==e.percentOfDailyNeeds&&(e.percentOfDailyNeeds=Math.round("add"===o?e.percentOfDailyNeeds+c:e.percentOfDailyNeeds-c))),e})),r.nutrients=r.nutrients.map((function(e){return e.name===n&&(e.amount=Math.round("add"===o?e.amount+a:e.amount-a),void 0!==e.percentOfDailyNeeds&&(e.percentOfDailyNeeds=Math.round(e.percentOfDailyNeeds+c))),e})),r},E=[{name:"Calories",amount:0,unit:"cal",percentOfDailyNeeds:0},{name:"Fat",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Saturated Fat",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Carbohydrates",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Net Carbohydrates",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Sugar",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Cholesterol",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Sodium",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Protein",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Vitamin C",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Manganese",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Fiber",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Vitamin B6",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Copper",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin B1",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Folate",amount:0,unit:"\xb5g",percentOfDailyNeeds:0},{name:"Potassium",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Magnesium",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin B3",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin B5",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin B2",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Iron",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Calcium",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin A",amount:0,unit:"IU",percentOfDailyNeeds:0},{name:"Zinc",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Phosphorus",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin K",amount:0,unit:"\xb5g",percentOfDailyNeeds:0},{name:"Selenium",amount:0,unit:"\xb5g",percentOfDailyNeeds:0},{name:"Vitamin E",amount:0,unit:"mg",percentOfDailyNeeds:0}],U={sumCal:0,sumFat:0,sumProtein:0,sumCarb:0,sumBurnt:0,meals:{breakfast:{sumCal:0,sumFat:0,sumProtein:0,sumCarb:0,foods:[],nutrients:E},lunch:{sumCal:0,sumFat:0,sumProtein:0,sumCarb:0,foods:[],nutrients:E},dinner:{sumCal:0,sumFat:0,sumProtein:0,sumCarb:0,foods:[],nutrients:E},snacks:{sumCal:0,sumFat:0,sumProtein:0,sumCarb:0,foods:[],nutrients:E}},nutrients:E},A={id:1111,name:"name",nameClean:"name clean",amount:1,unit:"g",possibleUnits:["piece","slice","fruit","g","oz","cup","serving"],image:"imgFile",meta:[],nutrition:{nutrients:E,caloricBreakdown:{percentProtein:30,percentFat:20,percentCarbs:50},weightPerServing:{amount:0,unit:"g"}}},M={goalCal:1800,goalFat:50,goalProtein:80,goalCarb:200},z=function(e){var t=Object(a.useState)(D(new Date)),n=Object(s.a)(t,2),c=n[0],o=n[1],r=Object(a.useState)(!!y.auth().currentUser),l=Object(s.a)(r,2),u=l[0],d=l[1],b=Object(a.useState)(U),p=Object(s.a)(b,2),O=p[0],g=p[1];Object(a.useEffect)((function(){var t=new AbortController;return!1===t.signal.aborted&&(console.log("the date recorded now is: ",D(e.date)),o(D(e.date))),function(){t.abort()}}),[e.date]),y.auth().onAuthStateChanged((function(){console.log("(auth state change) - Signed in ",!!y.auth().currentUser),d(!!y.auth().currentUser)}));return Object(a.useEffect)((function(){var e=new AbortController;e.signal.aborted;if(!0===u){console.log("(useEffect() of Home) - Am signed in");var t=y.firestore().collection("users").doc(y.auth().currentUser.uid).collection("days").doc(c);t.get().then((function(n){n.exists?t.onSnapshot((function(t){console.log("the doc of this date exists!",t),!1===e.signal.aborted&&g(t.data())})):(console.log("the doc was not found, need to create it"),t.set(U),!1===e.signal.aborted&&g(U))}))}return function(){e.abort()}}),[u,c]),u?Object(j.jsxs)("div",{className:"page-home",children:[Object(j.jsxs)("div",{className:"page-home-top",children:[Object(j.jsx)("button",{onClick:function(){y.auth().signOut()},children:"Sign Out"}),Object(j.jsx)(m,{date:c,data:O,config:e.config})]}),Object(j.jsx)(f,{date:c,dispatchDate:e.dispatchDate}),Object(j.jsx)("div",{className:"page-home-mealbars",children:["breakfast","lunch","dinner","snacks"].map((function(e){return Object(j.jsx)(h,{meal:e,totalCal:O.meals[e].sumCal},e)}))}),Object(j.jsx)("div",{className:"page-home-configure",children:Object(j.jsx)(i.b,{to:"/configure",children:Object(j.jsx)("button",{children:"\u2699\ufe0f"})})})]}):Object(j.jsx)(C,{changeSign:function(e){d(e)}})},I=(n(62),n(63),n(39)),L=function(e){var t=function(t){var n={fat:Number(e.data.sumFat),protein:Number(e.data.sumProtein),carb:Number(e.data.sumCarb)};return Number(e.data.sumFat)+Number(e.data.sumProtein)+Number(e.data.sumCarb)!==0?Math.round(n[t]/(Number(e.data.sumFat)+Number(e.data.sumProtein)+Number(e.data.sumCarb))*100):0},n={fat:"rgb(160, 192, 160)",protein:"rgb(128, 155, 135)",carb:"rgb(106, 128, 115)"},a={fat:"Fat",carb:"Carbs",protein:"Protein"};return Object(j.jsxs)("div",{className:"datalist",children:[Object(j.jsxs)("div",{className:"datalist-portion",children:[Object(j.jsxs)("h1",{children:[e.data.sumCal," Calories"]}),Object(j.jsx)("hr",{}),Object(j.jsxs)("div",{className:"datalist-info",children:[Object(j.jsx)("h2",{children:"Recommended"}),Object(j.jsxs)("h2",{children:["".concat(e.goal-140,"-").concat(e.goal)," cals"]})]}),Object(j.jsxs)("div",{className:"datalist-info",children:[Object(j.jsx)("h2",{children:"Calories"}),Object(j.jsxs)("h2",{children:[e.data.sumCal," cals"]})]}),Object(j.jsx)("hr",{}),Object(j.jsxs)("div",{className:"datalist-info-pie",children:[Object(j.jsx)(I.PieChart,{className:"datalist-pie",data:[{title:"Fat",value:Number(e.data.sumFat),color:n.fat},{title:"Protein",value:Number(e.data.sumProtein),color:n.protein},{title:"Carb",value:Number(e.data.sumCarb),color:n.carb}]}),";",Object(j.jsx)("div",{className:"datalist-pie-info",children:["fat","protein","carb"].map((function(e){return Object(j.jsxs)("div",{className:"datalist-info",children:[Object(j.jsxs)("div",{className:"datalist-pie-label",children:[Object(j.jsx)("div",{className:"datalist-pie-color",style:{backgroundColor:n[e]}}),Object(j.jsx)("h2",{children:a[e]})]}),Object(j.jsxs)("h2",{children:[t(e),"%"]})]},e)}))})]})]}),Object(j.jsxs)("div",{className:"datalist-portion",children:[Object(j.jsxs)("div",{className:"datalist-info",children:[Object(j.jsx)("h2",{children:"Calories"}),Object(j.jsxs)("h2",{children:[e.data.sumCal," cals"]})]}),Object(j.jsxs)("div",{className:"datalist-info",children:[Object(j.jsx)("h2",{children:"Protein"}),Object(j.jsxs)("h2",{children:[e.data.sumProtein,"g"]})]}),Object(j.jsxs)("div",{className:"datalist-info",children:[Object(j.jsx)("h2",{children:"Carbs"}),Object(j.jsxs)("h2",{children:[e.data.sumCarb,"g"]})]}),Object(j.jsxs)("div",{className:"datalist-info",children:[Object(j.jsx)("h2",{children:"Fat"}),Object(j.jsxs)("h2",{children:[e.data.sumFat,"g"]})]})]})]})},B=n(22),q=n(23),G=q.a.div(O||(O=Object(B.a)(["\n  position: relative;\n  display: inline-block;\n\n  font-size: ",";\n\n  &:hover{\n    .dropdown-content {\n      display: block;\n    }\n  }\n\n  .dropdown-content {\n    display: none;\n    position: absolute;\n    background-color: #f9f9f9;\n    min-width: 160px;\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n    z-index: 1;\n  }\n\n  .dropdown-btn {\n    color: black;\n    padding: 16px;\n    font-size: 16px;\n    border: none;\n    border-bottom: 1px solid black;\n    cursor: pointer;\n    font-size: inherit;\n  }\n"])),(function(e){return e.fontSize||"15px"})),R=q.a.h3(g||(g=Object(B.a)([" \n  color: black;\n  font-size: ",";\n  padding: 12px 16px;\n  text-decoration: none;\n  display: block;\n  &:hover {\n    background-color: #f1f1f1;\n  }\n"])),(function(e){return e.fontSize||"15px"})),T=q.a.div(x||(x=Object(B.a)(["\n\n  position: relative;\n  width: fit-content;\n\n  &:hover {\n    .component-message {\n      display: block;\n    }\n  }\n  .component-message {\n    display :none;\n    position: absolute;\n    top: -70px;\n    transition: 0.3s all linear;\n    background-color: #f9f9f9;\n    padding: 10px 20px;\n    border-radius: 30px;\n    width: fit-content;\n    font-size: 15px;\n  }\n"]))),V=q.a.div(v||(v=Object(B.a)(["\n  background-color: var(--primary);\n  border-radius: 50px;\n  width: ",";\n  color: white;\n  font-weight: 500;\n  font-size: 40px;\n  margin: 50px auto;\n  padding: 30px 0;\n  transition: 0.1s linear all;\n  text-align: center;\n  &: hover{\n    background-color: var(--primary-dark);\n  }\n"])),(function(e){return e.width||"100%"})),K=q.a.div(N||(N=Object(B.a)(["\n  position: absolute;\n  top: 0;\n  left: 50px;\n  color: var(--primary-letter);\n  font-size: 40px;\n  z-index: 12;\n"]))),H=(n(37),function(e){var t=function(){console.log("original data: ",e.data);var t=function(e,t,n,a){var c=Object(S.a)({},e);return c.meals[t].foods.splice(a,1),[["sumCal","Calories"],["sumFat","Fat"],["sumProtein","Protein"],["sumCarb","Carbohydrates"]].forEach((function(e){var a=n.nutrition.nutrients.filter((function(t){return t.name===e[1]}))[0];c=P(c,t,e[0],a.amount,"subtract")})),n.nutrition.nutrients.forEach((function(e){c=F(c,t,e.name,e.amount,e.percentOfDailyNeeds,"subtract")})),c}(e.data,e.meal,e.food,e.order);console.log("updated data: ",t),e.update(t)};return Object(j.jsxs)("div",{className:"foodbar",children:[Object(j.jsxs)("div",{className:"foodbar-left",children:[e.food.image?Object(j.jsx)("img",{src:"https://spoonacular.com/cdn/ingredients_100x100/"+e.food.image,alt:e.food.name}):null,Object(j.jsxs)("div",{className:"foodbar-text",children:[Object(j.jsx)("h2",{children:w(e.food.name)}),Object(j.jsxs)("h3",{children:[k(e.food,"Calories").amount,"cal  \u26ab ",e.food.amount,e.food.unit]})]})]}),Object(j.jsx)("button",{onClick:function(){return t()},children:"-"})]})}),J=function(e){var t=Object(l.f)("/meal/:id").url.split("/");t=t[t.length-1];var n=Math.round(e.config.goalCal/3),c=Object(a.useState)(U.meals[t]),o=Object(s.a)(c,2),r=o[0],u=o[1],d=Object(a.useState)({color:"white"}),m=Object(s.a)(d,2),f=m[0],h=m[1],p=Object(a.useState)(0),O=Object(s.a)(p,2),g=O[0],x=O[1],v=Object(a.useState)(!!y.auth().currentUser),N=Object(s.a)(v,2),C=N[0],S=N[1],w=Object(a.useState)(U),k=Object(s.a)(w,2),P=k[0],F=k[1];Object(a.useEffect)((function(){var n=new AbortController,a=n.signal.aborted,c=y.firestore();return y.auth().currentUser&&!0!==a?c.collection("users").doc(y.auth().currentUser.uid).collection("days").doc(D(e.date)).get().then((function(e){console.log("MyDoc in Meal: ",e),!0!==(a=n.signal.aborted)&&(u(e.data().meals[t]),F(e.data()))})).catch((function(e){console.error("Error in Meal: ",e)})):console.log("not logged in cannot update meal"),function(){n.abort()}}),[e.date,t,C]),y.auth().onAuthStateChanged((function(){S(!!y.auth().currentUser)})),Object(a.useEffect)((function(){var e=Math.round(r.sumCal/n*100);e>100?(e%=100,h({color:"rgb(245, 235, 146)"})):h({color:"white"}),e>200&&(e=100,h({color:"rgb(245, 235, 146)"})),x(e)}),[r,n]);var E=function(t){console.log("updated: ",t),y.firestore().collection("users").doc(y.auth().currentUser.uid).collection("days").doc(D(e.date)).update(t),e.dispatchDate({type:"reload"})};return Object(j.jsxs)("div",{className:"page-meal",children:[Object(j.jsxs)("div",{className:"page-meal-top",children:[Object(j.jsx)("div",{className:"page-meal-progress",style:f,children:Object(j.jsx)(b,{progress:g,circleSize:"400",calories:r.sumCal,message:"calories eaten"})}),Object(j.jsx)("h2",{children:t}),Object(j.jsx)("h3",{children:D(e.date)})]}),Object(j.jsx)(i.b,{to:"".concat(t,"/search"),className:"page-meal-search-link",children:Object(j.jsx)(V,{width:"60%",children:"Add Food"})}),Object(j.jsx)("div",{className:"page-meal-foodlist",children:r.foods.map((function(e,n){return Object(j.jsx)(H,{food:e,order:n,data:P,meal:t,update:E},n)}))}),Object(j.jsx)("div",{className:"page-meal-datalist",children:Object(j.jsx)(L,{data:r,goal:n})}),Object(j.jsx)(K,{children:Object(j.jsx)(i.b,{to:"/lifesum-clone",children:Object(j.jsx)("h2",{children:"\u2b05"})})})]})},W=n(21),_=n.n(W),Y=n(31),Z=(n(65),function(e){var t;return Object(j.jsx)("div",{className:"foodbar",children:Object(j.jsx)(i.b,{to:"/meal/".concat(e.meal,"/search/").concat((t=e.id,t.split("-")[1])),children:Object(j.jsxs)("div",{className:"foodbar-left",children:[e.imgSrc?Object(j.jsx)("img",{src:e.imgSrc,alt:e.title}):null,Object(j.jsx)("div",{className:"foodbar-text",children:Object(j.jsx)("h2",{children:w(e.title)})})]})})})}),Q=function(e){var t=Object(l.f)("/meal/:id/search").url.split("/");t=t[t.length-2];var n=Object(a.useState)(""),c=Object(s.a)(n,2),o=c[0],r=c[1];return Object(a.useEffect)((function(){var e=document.getElementById("page-searchbar"),t=function(t){13===t.keyCode&&(t.preventDefault(),console.log("clicked on enter from input, value:",e.value),r(e.value))};return e.addEventListener("keyup",t),function(){return console.log("Search Enter: removing event listener..."),e.removeEventListener("keyup",t)}}),[]),Object(a.useEffect)((function(){var t=new AbortController,n=t.signal.aborted;if(""!==o){function a(){return(a=Object(Y.a)(_.a.mark((function a(){var c,r;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("https://api.spoonacular.com/food/ingredients/search?apiKey=".concat("533b3991a7534e9fae98b026145e06db","&query=").concat(o,"&number=25"));case 2:return c=a.sent,a.next=5,c.json();case 5:r=a.sent,n=t.signal.aborted,console.log("Search abort signal is: ",n),!1===n&&(console.log("Results: ",r),e.dispatchResults({type:"update",payload:r.results}));case 9:case"end":return a.stop()}}),a)})))).apply(this,arguments)}console.log("Going to fetch API info for: ",o),function(){a.apply(this,arguments)}()}return function(){console.log("Search has been aborted"),t.abort()}}),[o]),Object(j.jsxs)("div",{className:"page-search",children:[Object(j.jsxs)("div",{className:"page-search-top",children:[Object(j.jsxs)("div",{className:"page-search-nav",children:[Object(j.jsx)(i.b,{to:"/meal/".concat(t),children:Object(j.jsx)("button",{children:"\u2b05"})}),Object(j.jsx)("h2",{children:w(t)})]}),Object(j.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Search Food",id:"page-searchbar"})]}),Object(j.jsx)("div",{className:"page-search-items",children:e.results.map((function(e){return Object(j.jsx)(Z,{id:"foodId-"+e.id,title:e.name,imgSrc:"https://spoonacular.com/cdn/ingredients_100x100/"+e.image,meal:t},e.id)}))})]})},X=(n(66),function(e){var t=Object(l.f)("/meal/:id/search/:id").url.split("/");console.log("link is: ",t);var n=t[t.length-1],c=t[t.length-3];console.log("The ID of the food is: ",n),console.log("The meal is: ",c),console.log("The date is: ",D(e.date));var o=Object(a.useState)(A),r=Object(s.a)(o,2),u=r[0],d=r[1],m=Object(a.useState)(U),f=Object(s.a)(m,2),h=f[0],p=f[1],O=Object(a.useState)(1),g=Object(s.a)(O,2),x=g[0],v=g[1],N=Object(a.useState)("g"),C=Object(s.a)(N,2),w=C[0],E=C[1],M=Object(a.useState)([["protein",30],["fat",20],["carbs",50]]),z=Object(s.a)(M,2),I=z[0],L=z[1];Object(a.useEffect)((function(){var t=new AbortController,n=(t.signal.aborted,y.firestore().collection("users").doc(y.auth().currentUser.uid).collection("days").doc(D(e.date)));return n.get().then((function(e){e.exists?n.onSnapshot((function(e){!0!==t.signal.aborted&&p(e.data())})):console.log("the doc was not found, need to create it")})),function(){t.abort()}}),[e.date]),Object(a.useEffect)((function(){var e=document.getElementById("page-food-amount");e.value=x;var t=function(t){13===t.keyCode&&(t.preventDefault(),console.log("clicked on enter from input, value:",e.value),v(e.value))};return e.addEventListener("keyup",t),function(){return e.removeEventListener("keyup",t)}}),[]),Object(a.useEffect)((function(){var e=new AbortController;e.signal.aborted;function t(){return(t=Object(Y.a)(_.a.mark((function t(){var a,c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.spoonacular.com/food/ingredients/".concat(n,"/information?apiKey=").concat("533b3991a7534e9fae98b026145e06db","&amount=").concat(x,"&unit=").concat(w));case 2:return a=t.sent,t.next=5,a.json();case 5:c=t.sent,!1===e.signal.aborted&&(console.log("Result Food: ",c),d(c));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return console.log("Amount is now: ",x,". Unit is: ",w),function(){t.apply(this,arguments)}(),function(){e.abort()}}),[x,w,n]),Object(a.useEffect)((function(){var e=u.nutrition.caloricBreakdown;console.log("Protein: ",e.percentProtein),L([["protein",e.percentProtein],["fat",e.percentFat],["carbs",e.percentCarbs]])}),[u]);return Object(j.jsxs)("div",{className:"page-food",children:[Object(j.jsx)("div",{className:"page-food-top",children:Object(j.jsx)("h2",{children:u.name})}),Object(j.jsxs)("div",{className:"page-food-section",children:[Object(j.jsxs)("div",{className:"page-food-inputs",children:[Object(j.jsxs)(T,{children:[Object(j.jsx)("h2",{className:"component-message",children:"Press Enter to Submit"}),Object(j.jsx)("input",{type:"number",min:"1",id:"page-food-amount"})]}),Object(j.jsxs)(G,{fontSize:"55px",children:[Object(j.jsxs)("button",{className:"dropdown-btn",children:[w," \u23f7"]}),Object(j.jsx)("div",{className:"dropdown-content",children:u.possibleUnits.map((function(e){return Object(j.jsxs)(R,{onClick:function(){return E(e)},children:[" ",e]},e)}))})]})]}),Object(j.jsx)("div",{children:Object(j.jsxs)("h2",{children:[k(u,"Calories").amount," cals"]})})]}),Object(j.jsxs)("div",{className:"page-food-section",children:[Object(j.jsx)("h3",{children:"Nutritional Information"}),Object(j.jsx)("div",{className:"page-food-macros",children:I.map((function(e){return Object(j.jsx)(b,{progress:Number(e[1]),circleSize:"250",calories:"".concat(e[1],"%"),message:e[0]},e[0])}))}),Object(j.jsx)("div",{className:"page-food-nutrients",children:u.nutrition.nutrients.map((function(e){return Object(j.jsxs)("div",{className:"page-food-nutrient",children:[Object(j.jsxs)("div",{className:"page-food-nutrient-top",children:[Object(j.jsx)("h4",{className:"page-food-nutrient-top-text",children:e.name}),Object(j.jsx)("h4",{className:"page-food-nutrient-top-text",children:e.amount+e.unit})]}),Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{className:"page-food-nutrient-percent",children:[e.percentOfDailyNeeds,"% of Daily Needs"]})})]},e.name)}))})]}),Object(j.jsx)("div",{className:"page-food-trackDiv",children:Object(j.jsx)(i.b,{to:"/meal/".concat(c),children:Object(j.jsx)(V,{onClick:function(){console.log("Going to Update Firestore"),console.log("The result being: ",u),console.log("The data (before update) being: ",h);var t=function(e,t,n){var a=Object(S.a)({},e);return a.meals[t].foods.push(n),[["sumCal","Calories"],["sumFat","Fat"],["sumProtein","Protein"],["sumCarb","Carbohydrates"]].forEach((function(e){var c=n.nutrition.nutrients.filter((function(t){return t.name===e[1]}))[0];a=P(a,t,e[0],c.amount,"add")})),n.nutrition.nutrients.forEach((function(e){a=F(a,t,e.name,e.amount,e.percentOfDailyNeeds,"add")})),a}(h,c,u);y.firestore().collection("users").doc(y.auth().currentUser.uid).collection("days").doc(D(e.date)).update(t)},children:"Track Food"})})}),Object(j.jsx)(K,{children:Object(j.jsx)(i.b,{to:"/meal/".concat(c,"/search"),children:Object(j.jsx)("h2",{children:"\u2b05"})})})]})}),$=(n(67),function(e){var t=Object(a.useState)(1400),n=Object(s.a)(t,2),c=n[0],o=(n[1],Object(a.useState)(U)),r=Object(s.a)(o,2),l=r[0],u=r[1];return Object(a.useEffect)((function(){var t=new AbortController,n=t.signal.aborted,a=y.firestore();return y.auth().currentUser&&!0!==n?a.collection("users").doc(y.auth().currentUser.uid).collection("days").doc(D(e.date)).get().then((function(e){console.log("MyDoc in Meal: ",e),!0!==(n=t.signal.aborted)&&u(e.data())})).catch((function(e){console.error("Error in Meal: ",e)})):console.log("not logged in cannot update meal"),function(){t.abort()}}),[e]),Object(j.jsxs)("div",{className:"datasheet",children:[Object(j.jsx)("div",{className:"page-datasheet-back-div",children:Object(j.jsx)(i.b,{to:"/lifesum-clone",children:Object(j.jsx)("h2",{children:"\u2b05"})})}),Object(j.jsx)("div",{className:"datasheet-section",children:Object(j.jsx)(L,{data:l,goal:c,className:"datasheet-datalist"})}),Object(j.jsx)("div",{className:"datasheet-section",children:l.nutrients.map((function(e){return Object(j.jsxs)("div",{className:"page-food-nutrient",children:[Object(j.jsxs)("div",{className:"page-food-nutrient-top",children:[Object(j.jsx)("h4",{className:"page-food-nutrient-top-text",children:e.name}),Object(j.jsx)("h4",{className:"page-food-nutrient-top-text",children:e.amount+e.unit})]}),Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{className:"page-food-nutrient-percent",children:[e.percentOfDailyNeeds,"% of Daily Needs"]})})]},e.name)}))})]})});function ee(e,t){switch(t.type){case"increment":var n=e.date;return n.setDate(n.getDate()+1),console.log("added: ",n),{date:n};case"decrement":var a=e.date;return a.setDate(a.getDate()-1),{date:a};case"reload":return{date:e.date};case"update":return{date:t.payload};default:throw new Error}}function te(e,t){switch(t.type){case"update":return{results:t.payload};default:throw new Error}}function ne(e,t){switch(t.type){case"update":return{config:t.payload};default:throw new Error}}n(68);var ae=function(e){Object(a.useEffect)((function(){var t=new AbortController,n=document.querySelector("#page-configure-calories"),a=document.querySelector("#page-configure-carbs"),c=document.querySelector("#page-configure-protein"),o=document.querySelector("#page-configure-fat");return n.value=e.config.goalCal,a.value=e.config.goalCarb,c.value=e.config.goalProtein,o.value=e.config.goalFat,function(){t.abort()}}),[e]);return Object(j.jsxs)("div",{className:"page-configure",children:[Object(j.jsx)("div",{className:"page-configure-top",children:Object(j.jsx)("h1",{children:"Set Configurations"})}),Object(j.jsxs)("div",{className:"page-configure-inputs",children:[Object(j.jsxs)("div",{className:"page-configure-inputDiv",children:[Object(j.jsx)("h2",{children:"Calorie Goal: "}),Object(j.jsx)("input",{type:"number",min:"1200",id:"page-configure-calories"})]}),Object(j.jsxs)("div",{className:"page-configure-inputDiv",children:[Object(j.jsx)("h2",{children:"Carbs Goal: "}),Object(j.jsx)("input",{type:"number",min:"0",id:"page-configure-carbs"})]}),Object(j.jsxs)("div",{className:"page-configure-inputDiv",children:[Object(j.jsx)("h2",{children:"Protein Goal: "}),Object(j.jsx)("input",{type:"number",min:"0",id:"page-configure-protein"})]}),Object(j.jsxs)("div",{className:"page-configure-inputDiv",children:[Object(j.jsx)("h2",{children:"Fat Goal: "}),Object(j.jsx)("input",{type:"number",min:"0",id:"page-configure-fat"})]})]}),Object(j.jsx)("div",{className:"page-configure-submit",children:Object(j.jsx)(V,{width:"60%",onClick:function(){var t=document.querySelector("#page-configure-calories"),n=document.querySelector("#page-configure-carbs"),a=document.querySelector("#page-configure-protein"),c=document.querySelector("#page-configure-fat"),o={goalCal:Number(t.value),goalFat:Number(c.value),goalProtein:Number(a.value),goalCarb:Number(n.value)};y.firestore().collection("users").doc(y.auth().currentUser.uid).collection("settings").doc("config").update(o),e.dispatchConfig({type:"update",payload:o})},children:"Submit"})}),Object(j.jsx)(K,{children:Object(j.jsx)(i.b,{to:"/lifesum-clone",children:Object(j.jsx)("h2",{children:"\u2b05"})})})]})};var ce=function(){var e=Object(a.useReducer)(ee,{date:new Date}),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useReducer)(te,{results:[]}),r=Object(s.a)(o,2),u=r[0],d=r[1],b=Object(a.useReducer)(ne,{config:M}),m=Object(s.a)(b,2),f=m[0],h=m[1],p=Object(a.useState)(!!y.auth().currentUser),O=Object(s.a)(p,2),g=O[0],x=O[1];return y.auth().onAuthStateChanged((function(){console.log("App - Signed in ",!!y.auth().currentUser),x(!!y.auth().currentUser)})),Object(a.useEffect)((function(){var e=new AbortController;e.signal.aborted;if(!0===g){var t=y.firestore().collection("users").doc(y.auth().currentUser.uid).collection("settings").doc("config");t.get().then((function(n){n.exists?t.onSnapshot((function(t){console.log("the Config exists and is",t.data()),!1===e.signal.aborted&&h({type:"update",payload:t.data()})})):(console.log("the Config was not found, need to create it"),t.set(M))}))}return function(){e.abort()}}),[g]),Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(i.a,{children:Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{exact:!0,path:"/lifesum-clone/",component:function(){return Object(j.jsx)(z,{date:n.date,dispatchDate:c,config:f.config,dispatchConfig:h})}}),Object(j.jsx)(l.a,{exact:!0,path:"/meal/:id",component:function(){return Object(j.jsx)(J,{date:n.date,dispatchDate:c,config:f.config})}}),Object(j.jsx)(l.a,{exact:!0,path:"/lifesum-clone/signin",component:function(){return Object(j.jsx)(C,{})}}),Object(j.jsx)(l.a,{exact:!0,path:"/meal/:id/search",component:function(){return Object(j.jsx)(Q,{date:n.date,results:u.results,dispatchResults:d})}}),Object(j.jsx)(l.a,{exact:!0,path:"/meal/:id/search/:id",component:function(){return Object(j.jsx)(X,{date:n.date})}}),Object(j.jsx)(l.a,{exact:!0,path:"/datasheet",component:function(){return Object(j.jsx)($,{date:n.date})}}),Object(j.jsx)(l.a,{exact:!0,path:"/configure",component:function(){return Object(j.jsx)(ae,{config:f.config,dispatchConfig:h})}})]})})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))};r.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(ce,{})}),document.getElementById("root")),oe()}},[[69,1,2]]]);
//# sourceMappingURL=main.ef3058e7.chunk.js.map