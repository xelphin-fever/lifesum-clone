(this["webpackJsonplifesum-clone"]=this["webpackJsonplifesum-clone"]||[]).push([[0],{34:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},54:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),s=n(35),i=n.n(s),r=(n(45),n(6)),o=(n(46),n(9)),l=n(7),d=(n(47),n(78)),u=(n(48),n(1)),m=function(e){var t={fontSize:"".concat(Math.round(Number(e.circleSize)/5),"px")},n={fontSize:"".concat(Math.round(Number(e.circleSize)/12),"px")};return Object(u.jsxs)("div",{className:"progresscircle",children:[Object(u.jsx)(d.a,{variant:"determinate",value:e.progress,size:"".concat(e.circleSize,"px"),color:"inherit",thickness:1.2}),Object(u.jsxs)("div",{className:"progresscircle-text",children:[Object(u.jsx)("h2",{style:t,children:e.calories}),Object(u.jsx)("h3",{style:n,children:e.message})]})]})},j=function(e){var t=Object(a.useState)(1400),n=Object(r.a)(t,2),c=n[0],s=(n[1],Object(a.useState)(0)),i=Object(r.a)(s,2),l=i[0],d=i[1],j=Object(a.useState)(0),b=Object(r.a)(j,2),h=b[0],f=b[1],p=Object(a.useState)(0),O=Object(r.a)(p,2),g=O[0],x=O[1],v=Object(a.useState)(0),N=Object(r.a)(v,2),y=N[0],C=N[1],D=Object(a.useState)(0),S=Object(r.a)(D,2),w=S[0],k=S[1],F=Object(a.useState)({color:"white"}),P=Object(r.a)(F,2),E=P[0],U=P[1],I=Object(a.useState)("Calories Left"),z=Object(r.a)(I,2),A=z[0],M=z[1];return Object(a.useEffect)((function(){d(e.data.sumCal),f(e.data.sumBurnt)}),[e.data]),Object(a.useEffect)((function(){var e=l-h;x(e=e<0?0:e)}),[l,h]),Object(a.useEffect)((function(){var e=c-g,t=Math.round(g/c*100);t>100?(t%=100,e=g-c,M("Calories Over"),U({color:"rgb(219, 138, 105)"})):U({color:"white"}),t>200&&(t=100),C(e),k(t)}),[g,c]),Object(u.jsxs)("div",{className:"databar",children:[Object(u.jsxs)("div",{className:"databar-top",children:[Object(u.jsxs)("div",{className:"databar-data",children:[Object(u.jsx)("h2",{children:l}),Object(u.jsx)("h3",{children:"Calories Eaten"})]}),Object(u.jsx)("div",{className:"databar-calories",style:E,children:Object(u.jsx)(m,{progress:w,circleSize:"480",calories:y,message:A})}),Object(u.jsxs)("div",{className:"databar-data",children:[Object(u.jsx)("h2",{children:c}),Object(u.jsx)("h3",{children:"Calorie Goal"})]})]}),Object(u.jsxs)("div",{className:"databar-bottom",children:[Object(u.jsxs)("div",{className:"databar-data",children:[Object(u.jsx)("h2",{children:"Carbs"}),Object(u.jsxs)("h3",{children:[e.data.sumCarb,"g"]})]}),Object(u.jsxs)("div",{className:"databar-data",children:[Object(u.jsx)("h2",{children:"Proetein"}),Object(u.jsxs)("h3",{children:[e.data.sumProtein,"g"]})]}),Object(u.jsxs)("div",{className:"databar-data",children:[Object(u.jsx)("h2",{children:"Fat"}),Object(u.jsxs)("h3",{children:[e.data.sumFat,"g"]})]})]}),Object(u.jsx)(o.b,{to:"/datasheet",children:Object(u.jsx)("button",{className:"databar-button",children:"\ud83d\udcca Nutrient Data"})})]})},b=function(e){return Object(u.jsxs)("div",{className:"datechanger",children:[Object(u.jsx)("button",{onClick:function(){return e.dispatchDate({type:"decrement"})},children:"\u2b05"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:e.date}),Object(u.jsx)("input",{type:"date",id:"datechanger-date",onChange:function(t){var n=new Date(t.currentTarget.value);n.setDate(n.getDate()+1),e.dispatchDate({type:"update",payload:n})}})]}),Object(u.jsx)("button",{onClick:function(){return e.dispatchDate({type:"increment"})},children:"\u27a1"})]})},h=(n(54),function(e){var t=Object(a.useState)(e.meal),n=Object(r.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(e.totalCal),l=Object(r.a)(i,2),d=l[0],m=l[1],j={breakfast:{title:"Breakfast",emoji:"\ud83c\udf73"},lunch:{title:"Lunch",emoji:"\ud83e\udd57"},dinner:{title:"Dinner",emoji:"\ud83c\udf72"},snacks:{title:"Snacks",emoji:"\ud83c\udf50"}};return Object(a.useEffect)((function(){s(e.meal),m(e.totalCal)}),[e]),Object(u.jsxs)("div",{className:"mealbar",children:[Object(u.jsxs)("div",{className:"mealbar-top",children:[Object(u.jsx)("h2",{className:"mealbar-emoji",children:j[c].emoji}),Object(u.jsx)(o.b,{to:"/meal/".concat(c),children:Object(u.jsxs)("div",{className:"mealbar-text",children:[Object(u.jsx)("h2",{children:j[c].title}),Object(u.jsx)("h3",{children:"Here I'll write down a list of foods"})]})}),Object(u.jsx)(o.b,{to:"/meal/".concat(c,"/search"),children:Object(u.jsx)("button",{children:"\u2795"})})]}),Object(u.jsx)("div",{className:"mealbar-bottom",children:Object(u.jsxs)("h2",{children:[d," Calories"]})})]})}),f=n(25);n(55),n(66);f.a.initializeApp({apiKey:"AIzaSyBuUbx8Hxva5oyPCSAAdGp9nBkzbaK1t6M",authDomain:"lifesum-clone.firebaseapp.com",projectId:"lifesum-clone",storageBucket:"lifesum-clone.appspot.com",messagingSenderId:"87225916127",appId:"1:87225916127:web:2a81ab0a4faf08b270e76a"});f.a.firestore(),f.a.auth();var p,O,g,x,v,N=f.a,y=(n(57),function(e){var t=Object(a.useState)(!0),n=Object(r.a)(t,2),c=n[0],s=n[1];return!0===c?Object(u.jsxs)("div",{className:"page-signin",children:[Object(u.jsx)("h2",{children:"Lifesum Clone"}),Object(u.jsx)("h3",{children:"Please Don't Use Real Private Information"}),Object(u.jsxs)("div",{className:"signin",children:[Object(u.jsx)("h1",{children:"Sign Up"}),Object(u.jsx)("input",{type:"text",placeholder:"username",id:"signUp-username",maxLength:"12",autoComplete:"off"}),Object(u.jsx)("input",{type:"email",placeholder:"fake email",id:"signUp-email",maxLength:"20",autoComplete:"off"}),Object(u.jsx)("input",{type:"password",placeholder:"password",id:"signUp-password",maxLength:"15",autoComplete:"off"}),Object(u.jsx)("button",{onClick:function(){var t=document.querySelector("#signUp-username"),n=document.querySelector("#signUp-email"),a=document.querySelector("#signUp-password"),c=N.auth().createUserWithEmailAndPassword(n.value,a.value);c.then((function(n){return e.changeSign(!!N.auth().currentUser),n.user.updateProfile({displayName:t.value})})),c.catch((function(e){return alert(e)}))},children:"Submit"}),Object(u.jsx)("h4",{children:"Already a member?"}),Object(u.jsx)("button",{onClick:function(){s(!1)},id:"signin-btnOther",children:"Log In"})]})]}):Object(u.jsxs)("div",{className:"page-signin",children:[Object(u.jsx)("h2",{children:"Lifesum Clone"}),Object(u.jsxs)("div",{className:"signin",children:[Object(u.jsx)("h1",{children:"Log In"}),Object(u.jsx)("input",{type:"email",placeholder:"email",id:"logIn-email",autoComplete:"off"}),Object(u.jsx)("input",{type:"password",placeholder:"password",id:"logIn-password",autoComplete:"off"}),Object(u.jsx)("button",{onClick:function(){var t=document.querySelector("#logIn-email"),n=document.querySelector("#logIn-password"),a=N.auth().signInWithEmailAndPassword(t.value,n.value);a.then((function(t){e.changeSign(!!N.auth().currentUser)})),a.catch((function(e){return alert(e)}))},children:"Log In"}),Object(u.jsx)("h4",{children:"Not a member?"}),Object(u.jsx)("button",{onClick:function(){s(!0)},id:"signin-btnOther",children:"Sign Up"})]})]})}),C=(n(58),n(26)),D=function(e){var t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();return e=t+"-"+n+"-"+a},S=function(e){if(""!==e&&"string"===typeof e)return e.charAt(0).toUpperCase()+e.slice(1)},w=function(e,t){var n=e.nutrition.nutrients.filter((function(e){return e.name===t}));return n.length>0?n[0]:{name:"Not Found",amount:0,unit:"cal",percentOfDailyNeeds:0}},k=function(e,t,n,a,c){var s=Object(C.a)({},e);return s.meals[t][n]=Math.round("add"===c?s.meals[t][n]+a:s.meals[t][n]-a),s[n]=Math.round("add"===c?s[n]+a:s[n]-a),s},F=function(e,t,n,a,c,s){var i=Object(C.a)({},e);return i.meals[t].nutrients=i.meals[t].nutrients.map((function(e){return e.name===n&&(e.amount=Math.round("add"===s?e.amount+a:e.amount-a),void 0!==e.percentOfDailyNeeds&&(e.percentOfDailyNeeds=Math.round("add"===s?e.percentOfDailyNeeds+c:e.percentOfDailyNeeds-c))),e})),i.nutrients=i.nutrients.map((function(e){return e.name===n&&(e.amount=Math.round("add"===s?e.amount+a:e.amount-a),void 0!==e.percentOfDailyNeeds&&(e.percentOfDailyNeeds=Math.round(e.percentOfDailyNeeds+c))),e})),i},P=[{name:"Calories",amount:0,unit:"cal",percentOfDailyNeeds:0},{name:"Fat",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Saturated Fat",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Carbohydrates",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Net Carbohydrates",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Sugar",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Cholesterol",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Sodium",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Protein",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Vitamin C",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Manganese",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Fiber",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Vitamin B6",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Copper",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin B1",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Folate",amount:0,unit:"\xb5g",percentOfDailyNeeds:0},{name:"Potassium",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Magnesium",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin B3",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin B5",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin B2",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Iron",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Calcium",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin A",amount:0,unit:"IU",percentOfDailyNeeds:0},{name:"Zinc",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Phosphorus",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin K",amount:0,unit:"\xb5g",percentOfDailyNeeds:0},{name:"Selenium",amount:0,unit:"\xb5g",percentOfDailyNeeds:0},{name:"Vitamin E",amount:0,unit:"mg",percentOfDailyNeeds:0}],E={sumCal:0,sumFat:0,sumProtein:0,sumCarb:0,sumBurnt:0,meals:{breakfast:{sumCal:0,sumFat:0,sumProtein:0,sumCarb:0,foods:[],nutrients:P},lunch:{sumCal:0,sumFat:0,sumProtein:0,sumCarb:0,foods:[],nutrients:P},dinner:{sumCal:0,sumFat:0,sumProtein:0,sumCarb:0,foods:[],nutrients:P},snacks:{sumCal:0,sumFat:0,sumProtein:0,sumCarb:0,foods:[],nutrients:P}},nutrients:P},U={id:1111,name:"name",nameClean:"name clean",amount:1,unit:"g",possibleUnits:["piece","slice","fruit","g","oz","cup","serving"],image:"imgFile",meta:[],nutrition:{nutrients:[{name:"Calories",amount:170,unit:"cal",percentOfDailyNeeds:10},{name:"Fat",amount:13,unit:"g",percentOfDailyNeeds:3},{name:"Saturated Fat",amount:11,unit:"g",percentOfDailyNeeds:50},{name:"Carbohydrates",amount:56,unit:"g",percentOfDailyNeeds:8},{name:"Net Carbohydrates",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Sugar",amount:32,unit:"g",percentOfDailyNeeds:60},{name:"Cholesterol",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Sodium",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Protein",amount:23,unit:"g",percentOfDailyNeeds:30},{name:"Vitamin C",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Manganese",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Fiber",amount:0,unit:"g",percentOfDailyNeeds:0},{name:"Vitamin B6",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Copper",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin B1",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Folate",amount:0,unit:"\xb5g",percentOfDailyNeeds:0},{name:"Potassium",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Magnesium",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin B3",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin B5",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin B2",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Iron",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Calcium",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin A",amount:0,unit:"IU",percentOfDailyNeeds:0},{name:"Zinc",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Phosphorus",amount:0,unit:"mg",percentOfDailyNeeds:0},{name:"Vitamin K",amount:0,unit:"\xb5g",percentOfDailyNeeds:0},{name:"Selenium",amount:0,unit:"\xb5g",percentOfDailyNeeds:0},{name:"Vitamin E",amount:0,unit:"mg",percentOfDailyNeeds:0}],caloricBreakdown:{percentProtein:30,percentFat:20,percentCarbs:50},weightPerServing:{amount:0,unit:"g"}}},I=function(e){var t=Object(a.useState)(D(new Date)),n=Object(r.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(!!N.auth().currentUser),o=Object(r.a)(i,2),l=o[0],d=o[1],m=Object(a.useState)(E),f=Object(r.a)(m,2),p=f[0],O=f[1];Object(a.useEffect)((function(){var t=new AbortController;return!1===t.signal.aborted&&(console.log("the date recorded now is: ",D(e.date)),s(D(e.date))),function(){t.abort()}}),[e.date]),N.auth().onAuthStateChanged((function(){console.log("(auth state change) - Signed in ",!!N.auth().currentUser),d(!!N.auth().currentUser)}));return Object(a.useEffect)((function(){var e=new AbortController;e.signal.aborted;if(!0===l){console.log("(useEffect() of Home) - Am signed in");var t=N.firestore().collection("users").doc(N.auth().currentUser.uid).collection("days").doc(c);t.get().then((function(n){n.exists?t.onSnapshot((function(t){console.log("the doc of this date exists!",t),!1===e.signal.aborted&&O(t.data())})):(console.log("the doc was not found, need to create it"),t.set(E),!1===e.signal.aborted&&O(E))}))}return function(){e.abort()}}),[l,c]),l?Object(u.jsxs)("div",{className:"page-home",children:[Object(u.jsxs)("div",{className:"page-home-top",children:[Object(u.jsx)("button",{onClick:function(){N.auth().signOut()},children:"Sign Out"}),Object(u.jsx)(j,{date:c,data:p})]}),Object(u.jsx)(b,{date:c,dispatchDate:e.dispatchDate}),Object(u.jsx)("div",{className:"page-home-mealbars",children:["breakfast","lunch","dinner","snacks"].map((function(e){return Object(u.jsx)(h,{meal:e,totalCal:p.meals[e].sumCal},e)}))})]}):Object(u.jsx)(y,{changeSign:function(e){d(e)}})},z=(n(59),n(60),n(36)),A=function(e){var t=function(t){var n={fat:Number(e.data.sumFat),protein:Number(e.data.sumProtein),carb:Number(e.data.sumCarb)};return Number(e.data.sumFat)+Number(e.data.sumProtein)+Number(e.data.sumCarb)!==0?Math.round(n[t]/(Number(e.data.sumFat)+Number(e.data.sumProtein)+Number(e.data.sumCarb))*100):0},n={fat:"rgb(160, 192, 160)",protein:"rgb(128, 155, 135)",carb:"rgb(106, 128, 115)"},a={fat:"Fat",carb:"Carbs",protein:"Protein"};return Object(u.jsxs)("div",{className:"datalist",children:[Object(u.jsxs)("div",{className:"datalist-portion",children:[Object(u.jsxs)("h1",{children:[e.data.sumCal," Calories"]}),Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"datalist-info",children:[Object(u.jsx)("h2",{children:"Recommended"}),Object(u.jsxs)("h2",{children:["".concat(e.goal-140,"-").concat(e.goal)," cals"]})]}),Object(u.jsxs)("div",{className:"datalist-info",children:[Object(u.jsx)("h2",{children:"Calories"}),Object(u.jsxs)("h2",{children:[e.data.sumCal," cals"]})]}),Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"datalist-info-pie",children:[Object(u.jsx)(z.PieChart,{className:"datalist-pie",data:[{title:"Fat",value:Number(e.data.sumFat),color:n.fat},{title:"Protein",value:Number(e.data.sumProtein),color:n.protein},{title:"Carb",value:Number(e.data.sumCarb),color:n.carb}]}),";",Object(u.jsx)("div",{className:"datalist-pie-info",children:["fat","protein","carb"].map((function(e){return Object(u.jsxs)("div",{className:"datalist-info",children:[Object(u.jsxs)("div",{className:"datalist-pie-label",children:[Object(u.jsx)("div",{className:"datalist-pie-color",style:{backgroundColor:n[e]}}),Object(u.jsx)("h2",{children:a[e]})]}),Object(u.jsxs)("h2",{children:[t(e),"%"]})]},e)}))})]})]}),Object(u.jsxs)("div",{className:"datalist-portion",children:[Object(u.jsxs)("div",{className:"datalist-info",children:[Object(u.jsx)("h2",{children:"Calories"}),Object(u.jsxs)("h2",{children:[e.data.sumCal," cals"]})]}),Object(u.jsxs)("div",{className:"datalist-info",children:[Object(u.jsx)("h2",{children:"Protein"}),Object(u.jsxs)("h2",{children:[e.data.sumProtein,"g"]})]}),Object(u.jsxs)("div",{className:"datalist-info",children:[Object(u.jsx)("h2",{children:"Carbs"}),Object(u.jsxs)("h2",{children:[e.data.sumCarb,"g"]})]}),Object(u.jsxs)("div",{className:"datalist-info",children:[Object(u.jsx)("h2",{children:"Fat"}),Object(u.jsxs)("h2",{children:[e.data.sumFat,"g"]})]})]})]})},M=n(22),B=n(23),V=B.a.div(p||(p=Object(M.a)(["\n  position: relative;\n  display: inline-block;\n\n  font-size: ",";\n\n  &:hover{\n    .dropdown-content {\n      display: block;\n    }\n  }\n\n  .dropdown-content {\n    display: none;\n    position: absolute;\n    background-color: #f9f9f9;\n    min-width: 160px;\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n    z-index: 1;\n  }\n\n  .dropdown-btn {\n    color: black;\n    padding: 16px;\n    font-size: 16px;\n    border: none;\n    border-bottom: 1px solid black;\n    cursor: pointer;\n    font-size: inherit;\n  }\n"])),(function(e){return e.fontSize||"15px"})),L=B.a.h3(O||(O=Object(M.a)([" \n  color: black;\n  font-size: ",";\n  padding: 12px 16px;\n  text-decoration: none;\n  display: block;\n  &:hover {\n    background-color: #f1f1f1;\n  }\n"])),(function(e){return e.fontSize||"15px"})),T=B.a.div(g||(g=Object(M.a)(["\n\n  position: relative;\n  width: fit-content;\n\n  &:hover {\n    .component-message {\n      display: block;\n    }\n  }\n  .component-message {\n    display :none;\n    position: absolute;\n    top: -70px;\n    transition: 0.3s all linear;\n    background-color: #f9f9f9;\n    padding: 10px 20px;\n    border-radius: 30px;\n    width: fit-content;\n    font-size: 15px;\n  }\n"]))),R=B.a.div(x||(x=Object(M.a)(["\n  background-color: var(--primary);\n  border-radius: 50px;\n  width: ",";\n  color: white;\n  font-weight: 500;\n  font-size: 40px;\n  margin: 50px auto;\n  padding: 30px 0;\n  transition: 0.1s linear all;\n  text-align: center;\n  &: hover{\n    background-color: var(--primary-dark);\n  }\n"])),(function(e){return e.width||"100%"})),q=B.a.div(v||(v=Object(M.a)(["\n  position: absolute;\n  top: 0;\n  left: 50px;\n  color: var(--primary-letter);\n  font-size: 40px;\n  z-index: 12;\n"]))),K=(n(34),function(e){var t=function(){console.log("original data: ",e.data);var t=function(e,t,n,a){var c=Object(C.a)({},e);return c.meals[t].foods.splice(a,1),[["sumCal","Calories"],["sumFat","Fat"],["sumProtein","Protein"],["sumCarb","Carbohydrates"]].forEach((function(e){var a=n.nutrition.nutrients.filter((function(t){return t.name===e[1]}))[0];c=k(c,t,e[0],a.amount,"subtract")})),n.nutrition.nutrients.forEach((function(e){c=F(c,t,e.name,e.amount,e.percentOfDailyNeeds,"subtract")})),c}(e.data,e.meal,e.food,e.order);console.log("updated data: ",t),e.update(t)};return Object(u.jsxs)("div",{className:"foodbar",children:[Object(u.jsxs)("div",{className:"foodbar-left",children:[e.food.image?Object(u.jsx)("img",{src:"https://spoonacular.com/cdn/ingredients_100x100/"+e.food.image,alt:e.food.name}):null,Object(u.jsxs)("div",{className:"foodbar-text",children:[Object(u.jsx)("h2",{children:S(e.food.name)}),Object(u.jsxs)("h3",{children:[w(e.food,"Calories").amount,"cal  \u26ab ",e.food.amount,e.food.unit]})]})]}),Object(u.jsx)("button",{onClick:function(){return t()},children:"-"})]})}),G=function(e){var t=Object(l.f)("/meal/:id").url.split("/");t=t[t.length-1];var n=Object(a.useState)(400),c=Object(r.a)(n,2),s=c[0],i=(c[1],Object(a.useState)(E.meals[t])),d=Object(r.a)(i,2),j=d[0],b=d[1],h=Object(a.useState)({color:"white"}),f=Object(r.a)(h,2),p=f[0],O=f[1],g=Object(a.useState)(0),x=Object(r.a)(g,2),v=x[0],y=x[1],C=Object(a.useState)(!!N.auth().currentUser),S=Object(r.a)(C,2),w=S[0],k=S[1],F=Object(a.useState)(E),P=Object(r.a)(F,2),U=P[0],I=P[1];Object(a.useEffect)((function(){var n=new AbortController,a=n.signal.aborted,c=N.firestore();return N.auth().currentUser&&!0!==a?c.collection("users").doc(N.auth().currentUser.uid).collection("days").doc(D(e.date)).get().then((function(e){console.log("MyDoc in Meal: ",e),!0!==(a=n.signal.aborted)&&(b(e.data().meals[t]),I(e.data()))})).catch((function(e){console.error("Error in Meal: ",e)})):console.log("not logged in cannot update meal"),function(){n.abort()}}),[e.date,t,w]),N.auth().onAuthStateChanged((function(){k(!!N.auth().currentUser)})),Object(a.useEffect)((function(){var e=Math.round(j.sumCal/s*100);e>100?(e%=100,O({color:"rgb(226, 190, 113)"})):O({color:"white"}),e>200&&(e=100,O({color:"rgb(219, 138, 105)"})),y(e)}),[j,s]);var z=function(t){console.log("updated: ",t),N.firestore().collection("users").doc(N.auth().currentUser.uid).collection("days").doc(D(e.date)).update(t),e.dispatchDate({type:"reload"})};return Object(u.jsxs)("div",{className:"page-meal",children:[Object(u.jsxs)("div",{className:"page-meal-top",children:[Object(u.jsx)("div",{className:"page-meal-progress",style:p,children:Object(u.jsx)(m,{progress:v,circleSize:"400",calories:j.sumCal,message:"calories eaten"})}),Object(u.jsx)("h2",{children:t}),Object(u.jsx)("h3",{children:D(e.date)})]}),Object(u.jsx)(o.b,{to:"".concat(t,"/search"),className:"page-meal-search-link",children:Object(u.jsx)(R,{width:"60%",children:"Add Food"})}),Object(u.jsx)("div",{className:"page-meal-foodlist",children:j.foods.map((function(e,n){return Object(u.jsx)(K,{food:e,order:n,data:U,meal:t,update:z},n)}))}),Object(u.jsx)("div",{className:"page-meal-datalist",children:Object(u.jsx)(A,{data:j,goal:s})}),Object(u.jsx)(q,{children:Object(u.jsx)(o.b,{to:"/lifesum-clone",children:Object(u.jsx)("h2",{children:"\u2b05"})})})]})},H=n(21),J=n.n(H),W=n(28),Z=(n(62),function(e){var t;return Object(u.jsx)("div",{className:"foodbar",children:Object(u.jsx)(o.b,{to:"/meal/".concat(e.meal,"/search/").concat((t=e.id,t.split("-")[1])),children:Object(u.jsxs)("div",{className:"foodbar-left",children:[e.imgSrc?Object(u.jsx)("img",{src:e.imgSrc,alt:e.title}):null,Object(u.jsx)("div",{className:"foodbar-text",children:Object(u.jsx)("h2",{children:S(e.title)})})]})})})}),_=function(e){var t=Object(l.f)("/meal/:id/search").url.split("/");t=t[t.length-2];var n=Object(a.useState)(""),c=Object(r.a)(n,2),s=c[0],i=c[1];return Object(a.useEffect)((function(){var e=document.getElementById("page-searchbar"),t=function(t){13===t.keyCode&&(t.preventDefault(),console.log("clicked on enter from input, value:",e.value),i(e.value))};return e.addEventListener("keyup",t),function(){return console.log("Search Enter: removing event listener..."),e.removeEventListener("keyup",t)}}),[]),Object(a.useEffect)((function(){var t=new AbortController,n=t.signal.aborted;if(""!==s){function a(){return(a=Object(W.a)(J.a.mark((function a(){var c,i;return J.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("https://api.spoonacular.com/food/ingredients/search?apiKey=".concat("533b3991a7534e9fae98b026145e06db","&query=").concat(s,"&number=25"));case 2:return c=a.sent,a.next=5,c.json();case 5:i=a.sent,n=t.signal.aborted,console.log("Search abort signal is: ",n),!1===n&&(console.log("Results: ",i),e.dispatchResults({type:"update",payload:i.results}));case 9:case"end":return a.stop()}}),a)})))).apply(this,arguments)}console.log("Going to fetch API info for: ",s),function(){a.apply(this,arguments)}()}return function(){console.log("Search has been aborted"),t.abort()}}),[s]),Object(u.jsxs)("div",{className:"page-search",children:[Object(u.jsxs)("div",{className:"page-search-top",children:[Object(u.jsxs)("div",{className:"page-search-nav",children:[Object(u.jsx)(o.b,{to:"/meal/".concat(t),children:Object(u.jsx)("button",{children:"\u2b05"})}),Object(u.jsx)("h2",{children:S(t)})]}),Object(u.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Search Food",id:"page-searchbar"})]}),Object(u.jsx)("div",{className:"page-search-items",children:e.results.map((function(e){return Object(u.jsx)(Z,{id:"foodId-"+e.id,title:e.name,imgSrc:"https://spoonacular.com/cdn/ingredients_100x100/"+e.image,meal:t},e.id)}))})]})},Y=(n(63),function(e){var t=Object(l.f)("/meal/:id/search/:id").url.split("/");console.log("link is: ",t);var n=t[t.length-1],c=t[t.length-3];console.log("The ID of the food is: ",n),console.log("The meal is: ",c),console.log("The date is: ",D(e.date));var s=Object(a.useState)(U),i=Object(r.a)(s,2),d=i[0],j=i[1],b=Object(a.useState)(E),h=Object(r.a)(b,2),f=h[0],p=h[1],O=Object(a.useState)(1),g=Object(r.a)(O,2),x=g[0],v=g[1],y=Object(a.useState)("g"),S=Object(r.a)(y,2),P=S[0],I=S[1],z=Object(a.useState)([["protein",30],["fat",20],["carbs",50]]),A=Object(r.a)(z,2),M=A[0],B=A[1];Object(a.useEffect)((function(){var t=new AbortController,n=(t.signal.aborted,N.firestore().collection("users").doc(N.auth().currentUser.uid).collection("days").doc(D(e.date)));return n.get().then((function(e){e.exists?n.onSnapshot((function(e){!0!==t.signal.aborted&&p(e.data())})):console.log("the doc was not found, need to create it")})),function(){t.abort()}}),[e.date]),Object(a.useEffect)((function(){var e=document.getElementById("page-food-amount");e.value=x;var t=function(t){13===t.keyCode&&(t.preventDefault(),console.log("clicked on enter from input, value:",e.value),v(e.value))};return e.addEventListener("keyup",t),function(){return e.removeEventListener("keyup",t)}}),[]),Object(a.useEffect)((function(){var e=new AbortController;e.signal.aborted;function t(){return(t=Object(W.a)(J.a.mark((function t(){var a,c;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.spoonacular.com/food/ingredients/".concat(n,"/information?apiKey=").concat("533b3991a7534e9fae98b026145e06db","&amount=").concat(x,"&unit=").concat(P));case 2:return a=t.sent,t.next=5,a.json();case 5:c=t.sent,!1===e.signal.aborted&&(console.log("Result Food: ",c),j(c));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return console.log("Amount is now: ",x,". Unit is: ",P),function(){t.apply(this,arguments)}(),function(){e.abort()}}),[x,P,n]),Object(a.useEffect)((function(){var e=d.nutrition.caloricBreakdown;console.log("Protein: ",e.percentProtein),B([["protein",e.percentProtein],["fat",e.percentFat],["carbs",e.percentCarbs]])}),[d]);return Object(u.jsxs)("div",{className:"page-food",children:[Object(u.jsx)("div",{className:"page-food-top",children:Object(u.jsx)("h2",{children:d.name})}),Object(u.jsxs)("div",{className:"page-food-section",children:[Object(u.jsxs)("div",{className:"page-food-inputs",children:[Object(u.jsxs)(T,{children:[Object(u.jsx)("h2",{className:"component-message",children:"Press Enter to Submit"}),Object(u.jsx)("input",{type:"number",min:"1",id:"page-food-amount"})]}),Object(u.jsxs)(V,{fontSize:"55px",children:[Object(u.jsxs)("button",{className:"dropdown-btn",children:[P," \u23f7"]}),Object(u.jsx)("div",{className:"dropdown-content",children:d.possibleUnits.map((function(e){return Object(u.jsxs)(L,{onClick:function(){return I(e)},children:[" ",e]},e)}))})]})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("h2",{children:[w(d,"Calories").amount," cals"]})})]}),Object(u.jsxs)("div",{className:"page-food-section",children:[Object(u.jsx)("h3",{children:"Nutritional Information"}),Object(u.jsx)("div",{className:"page-food-macros",children:M.map((function(e){return Object(u.jsx)(m,{progress:Number(e[1]),circleSize:"250",calories:"".concat(e[1],"%"),message:e[0]},e[0])}))}),Object(u.jsx)("div",{className:"page-food-nutrients",children:d.nutrition.nutrients.map((function(e){return Object(u.jsxs)("div",{className:"page-food-nutrient",children:[Object(u.jsxs)("div",{className:"page-food-nutrient-top",children:[Object(u.jsx)("h4",{className:"page-food-nutrient-top-text",children:e.name}),Object(u.jsx)("h4",{className:"page-food-nutrient-top-text",children:e.amount+e.unit})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("h4",{className:"page-food-nutrient-percent",children:[e.percentOfDailyNeeds,"% of Daily Needs"]})})]},e.name)}))})]}),Object(u.jsx)("div",{className:"page-food-trackDiv",children:Object(u.jsx)(o.b,{to:"/meal/".concat(c),children:Object(u.jsx)(R,{onClick:function(){console.log("Going to Update Firestore"),console.log("The result being: ",d),console.log("The data (before update) being: ",f);var t=function(e,t,n){var a=Object(C.a)({},e);return a.meals[t].foods.push(n),[["sumCal","Calories"],["sumFat","Fat"],["sumProtein","Protein"],["sumCarb","Carbohydrates"]].forEach((function(e){var c=n.nutrition.nutrients.filter((function(t){return t.name===e[1]}))[0];a=k(a,t,e[0],c.amount,"add")})),n.nutrition.nutrients.forEach((function(e){a=F(a,t,e.name,e.amount,e.percentOfDailyNeeds,"add")})),a}(f,c,d);N.firestore().collection("users").doc(N.auth().currentUser.uid).collection("days").doc(D(e.date)).update(t)},children:"Track Food"})})}),Object(u.jsx)(q,{children:Object(u.jsx)(o.b,{to:"/meal/".concat(c,"/search"),children:Object(u.jsx)("h2",{children:"\u2b05"})})})]})}),Q=(n(64),function(e){var t=Object(a.useState)(1400),n=Object(r.a)(t,2),c=n[0],s=(n[1],Object(a.useState)(E)),i=Object(r.a)(s,2),l=i[0],d=i[1];return Object(a.useEffect)((function(){var t=new AbortController,n=t.signal.aborted,a=N.firestore();return N.auth().currentUser&&!0!==n?a.collection("users").doc(N.auth().currentUser.uid).collection("days").doc(D(e.date)).get().then((function(e){console.log("MyDoc in Meal: ",e),!0!==(n=t.signal.aborted)&&d(e.data())})).catch((function(e){console.error("Error in Meal: ",e)})):console.log("not logged in cannot update meal"),function(){t.abort()}}),[e]),Object(u.jsxs)("div",{className:"datasheet",children:[Object(u.jsx)("div",{className:"page-datasheet-back-div",children:Object(u.jsx)(o.b,{to:"/lifesum-clone",children:Object(u.jsx)("h2",{children:"\u2b05"})})}),Object(u.jsx)("div",{className:"datasheet-section",children:Object(u.jsx)(A,{data:l,goal:c,className:"datasheet-datalist"})}),Object(u.jsx)("div",{className:"datasheet-section",children:l.nutrients.map((function(e){return Object(u.jsxs)("div",{className:"page-food-nutrient",children:[Object(u.jsxs)("div",{className:"page-food-nutrient-top",children:[Object(u.jsx)("h4",{className:"page-food-nutrient-top-text",children:e.name}),Object(u.jsx)("h4",{className:"page-food-nutrient-top-text",children:e.amount+e.unit})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("h4",{className:"page-food-nutrient-percent",children:[e.percentOfDailyNeeds,"% of Daily Needs"]})})]},e.name)}))})]})});function X(e,t){switch(t.type){case"increment":var n=e.date;return n.setDate(n.getDate()+1),console.log("added: ",n),{date:n};case"decrement":var a=e.date;return a.setDate(a.getDate()-1),{date:a};case"reload":return{date:e.date};case"update":return{date:t.payload};default:throw new Error}}function $(e,t){switch(t.type){case"update":return{results:t.payload};default:throw new Error}}var ee=function(){var e=Object(a.useReducer)(X,{date:new Date}),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useReducer)($,{results:[]}),i=Object(r.a)(s,2),d=i[0],m=i[1];return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(o.a,{children:Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{exact:!0,path:"/lifesum-clone/",component:function(){return Object(u.jsx)(I,{date:n.date,dispatchDate:c})}}),Object(u.jsx)(l.a,{exact:!0,path:"/meal/:id",component:function(){return Object(u.jsx)(G,{date:n.date,dispatchDate:c})}}),Object(u.jsx)(l.a,{exact:!0,path:"/lifesum-clone/signin",component:function(){return Object(u.jsx)(y,{})}}),Object(u.jsx)(l.a,{exact:!0,path:"/meal/:id/search",component:function(){return Object(u.jsx)(_,{date:n.date,results:d.results,dispatchResults:m})}}),Object(u.jsx)(l.a,{exact:!0,path:"/meal/:id/search/:id",component:function(){return Object(u.jsx)(Y,{date:n.date})}}),Object(u.jsx)(l.a,{exact:!0,path:"/datasheet",component:function(){return Object(u.jsx)(Q,{date:n.date})}})]})})})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(ee,{})}),document.getElementById("root")),te()}},[[65,1,2]]]);
//# sourceMappingURL=main.15f489a5.chunk.js.map